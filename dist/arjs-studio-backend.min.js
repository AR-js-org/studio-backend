!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("Octokit")):"function"==typeof define&&define.amd?define(["Octokit"],t):"object"==typeof exports?exports.ARjsStudioBackend=t(require("Octokit")):e.ARjsStudioBackend=t(e.Octokit)}(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(t,r){t.exports=e},function(e,t,r){var n=function(e){"use strict";var t=Object.prototype,r=t.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function u(e,t,r,n){var o=t&&t.prototype instanceof h?t:h,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return E()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var u=w(a,r);if(u){if(u===s)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var h=c(e,t,r);if("normal"===h.type){if(n=r.done?"completed":"suspendedYield",h.arg===s)continue;return{value:h.arg,done:r.done}}"throw"===h.type&&(n="completed",r.method="throw",r.arg=h.arg)}}}(e,r,a),i}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s={};function h(){}function f(){}function l(){}var p={};p[o]=function(){return this};var d=Object.getPrototypeOf,v=d&&d(d(_([])));v&&v!==t&&r.call(v,o)&&(p=v);var g=l.prototype=h.prototype=Object.create(p);function y(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function m(e){var t;this._invoke=function(n,o){function i(){return new Promise((function(t,i){!function t(n,o,i,a){var u=c(e[n],e,o);if("throw"!==u.type){var s=u.arg,h=s.value;return h&&"object"==typeof h&&r.call(h,"__await")?Promise.resolve(h.__await).then((function(e){t("next",e,i,a)}),(function(e){t("throw",e,i,a)})):Promise.resolve(h).then((function(e){s.value=e,i(s)}),(function(e){return t("throw",e,i,a)}))}a(u.arg)}(n,o,t,i)}))}return t=t?t.then(i,i):i()}}function w(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var n=c(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,s;var o=n.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function b(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(b,this),this.reset(!0)}function _(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return f.prototype=g.constructor=l,l.constructor=f,l[a]=f.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,l):(e.__proto__=l,a in e||(e[a]="GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(m.prototype),m.prototype[i]=function(){return this},e.AsyncIterator=m,e.async=function(t,r,n,o){var i=new m(u(t,r,n,o));return e.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},y(g),g[a]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},e.values=_,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),c=r.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),x(r),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:_(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),s}},e}(e.exports);try{regeneratorRuntime=n}catch(e){Function("r","regeneratorRuntime = r")(n)}},function(e,t,r){"use strict";r.r(t);r(1);var n=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function o(e,t){for(var r=[];e>0;)r.push(0!=(1&e)),e>>=1;for(;r.length<t;)r.push(!1);return r.reverse()}function i(e,t,r,n){if(!Number.isInteger(n)||n<0||n>=1<<t)throw new Error("value invalid or out of range for BCH with n = ".concat(e,", k = ").concat(t,": ").concat(n));if(e<=t)throw new Error("invalid BCH parameters: n = ".concat(e,", k = ").concat(t));if(r<(1<<e-t||r>=1<<e-t+1))throw new Error("invalid generator polynomial for BCH with n = ".concat(e,", k = ").concat(t,": ").concat(r));var i=o(n<<e-t^function(e,t){var r=e,n=t;if(0===t)throw new Error("divisor may not be zero");for(var o=1;(n|r)>n<<1;)n<<=1,++o;for(var i=0;o>0;)i<<=1,--o,(r^n)<r&&(i|=1,r^=n),n>>=1;return{quot:i,rem:r}}(n<<e-t,r).rem,e);if(i.length<e)throw new Error("BCH calculation invalid");return i}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var u=[{id:"3x3_hamming_6_3",maxNumMarkers:8,hamming:3,matrixSize:3,encoder:function(e){if(!Number.isInteger(e)||e<0||e>=8)throw new Error("value invalid or out of range for 3x3_hamming_6_3: "+e);var t=o(e,3);return[!0,t[0],t[1],(t[0]^t[1])>0,t[2],(t[0]^t[2])>0,!0,(t[1]^t[2])>0,!1]}},{id:"3x3_parity_6_5",maxNumMarkers:32,hamming:1,matrixSize:3,encoder:function(e){if(!Number.isInteger(e)||e<0||e>=32)throw new Error("value invalid or out of range for 3x3_parity_6_5: "+e);var t=o(e,5);return[!0,(t[0]^t[1]^t[2]^t[3]^t[4])>0,t[0],t[1],t[2],t[3],!0,t[4],!1]}},{id:"4x4_bch_13_5_5",maxNumMarkers:32,hamming:5,matrixSize:4,encoder:function(e){var t=i(13,5,465,e);return t.splice(0,0,!0),t.splice(12,0,!0),t.splice(15,0,!1),t}},{id:"4x4_bch_13_9_3",maxNumMarkers:512,hamming:3,matrixSize:4,encoder:function(e){var t=i(13,9,19,e);return t.splice(0,0,!0),t.splice(12,0,!0),t.splice(15,0,!1),t}},{id:"5x5_bch_22_7_7",maxNumMarkers:128,hamming:7,matrixSize:5,encoder:function(e){var t=i(22,7,36783,e);return t.splice(0,0,!0),t.splice(20,0,!0),t.splice(25,0,!1),t}},{id:"5x5_bch_22_12_5",maxNumMarkers:4096,hamming:5,matrixSize:5,encoder:function(e){var t=i(22,12,1897,e);return t.splice(0,0,!0),t.splice(20,0,!0),t.splice(25,0,!1),t}}],c=function(){function e(t,r){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.typeDesc=u.find((function(e){return e.id===t})),!this.typeDesc)throw new Error("unknown barcode matrix type id: "+t);if(!Number.isInteger(r))throw new Error("barcode value is not an integer: "+r);if(r<0||r>=this.typeDesc.maxNumMarkers)throw new Error("barcode value out of range: "+r);this.value=r,this.valueEncoded=this.typeDesc.encoder(r)}var t,r,n;return t=e,n=[{key:"getMatrixTypes",value:function(){return u}}],(r=[{key:"asSVG",value:function(){for(var e='<?xml version="1.0" encoding="utf-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect x="0" y="0" width="100" height="100" fill="black" />',t=50/this.typeDesc.matrixSize,r=0;r<this.typeDesc.matrixSize;++r)for(var n=0;n<this.typeDesc.matrixSize;++n)this.valueEncoded[r*this.typeDesc.matrixSize+n]||(e+='<rect x="'.concat(25+n*t,'" y="').concat(25+r*t,'" width="').concat(t,'" height="').concat(t,'" fill="white" />'));return e+="</svg>"}},{key:"asSVGDataURI",value:function(){return"data:image/svg+xml,"+encodeURIComponent(this.asSVG()).replace(/'/g,"%27").replace(/"/g,"%22")}}])&&a(t.prototype,r),n&&a(t,n),e}();function s(e){var t=new Image,r=new Promise((function(e,r){t.addEventListener("load",(function(){e(t)})),t.addEventListener("error",(function(){r("Error loading image")}))}));return t.src=e,r}function h(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){h(i,n,o,a,u,"next",e)}function u(e){h(i,n,o,a,u,"throw",e)}a(void 0)}))}}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t.startsWith("data:image"))throw new Error("Invalid data URI");this.dataURI=t}var t,r,n,o,i;return t=e,(r=[{key:"toPattern",value:(i=f(regeneratorRuntime.mark((function e(){var t,r,n,o,i,a,u,c,h,f,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(this.dataURI);case 2:for(t=e.sent,r=document.createElement("canvas"),n=r.getContext("2d"),r.width=16,r.height=16,o="",i=0;i>-2*Math.PI;i-=Math.PI/2)for(n.save(),n.clearRect(0,0,r.width,r.height),n.translate(r.width/2,r.height/2),n.rotate(i),n.drawImage(t,-r.width/2,-r.height/2,r.width,r.height),n.restore(),a=n.getImageData(0,0,r.width,r.height),0!==i&&(o+="\n"),u=2;u>=0;u--)for(c=0;c<a.height;c++){for(h=0;h<a.width;h++)0!==h&&(o+=" "),f=c*a.width*4+4*h+u,l=a.data[f],o+=String(l).padStart(3);o+="\n"}return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"toFullMarker",value:(o=f(regeneratorRuntime.mark((function e(t,r,n){var o,i,a,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(this.dataURI);case 2:return o=e.sent,i=.1+(1-t)/2*.8,a=document.createElement("canvas"),u=a.getContext("2d"),a.width=a.height=r,u.fillStyle="white",u.fillRect(0,0,a.width,a.height),u.fillStyle=n,u.fillRect(.1*a.width,.1*a.height,.8*a.width,.8*a.height),u.fillStyle="white",u.fillRect(i*a.width,i*a.height,a.width*(1-2*i),a.height*(1-2*i)),u.drawImage(o,i*a.width,i*a.height,a.width*(1-2*i),a.height*(1-2*i)),e.abrupt("return",a.toDataURL());case 17:case"end":return e.stop()}}),e,this)}))),function(e,t,r){return o.apply(this,arguments)})}])&&l(t.prototype,r),n&&l(t,n),e}();function d(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function v(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){d(i,n,o,a,u,"next",e)}function u(e){d(i,n,o,a,u,"throw",e)}a(void 0)}))}}function g(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,n,o,i;return t=e,r=null,n=[{key:"getBarcodeMarkerSVGDataURI",value:function(e,t){return new c(e,t).asSVGDataURI()}},{key:"getMarkerPattern",value:(i=v(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p(t).toPattern();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"getFullMarkerImage",value:(o=v(regeneratorRuntime.mark((function e(t,r,n,o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new p(t).toFullMarker(r,n,o);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(e,t,r,n){return o.apply(this,arguments)})}],r&&g(t.prototype,r),n&&g(t,n),e}();var m=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},w=r(0);function b(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,r,n,o,i,a){try{var u=e[i](a),c=u.value}catch(e){return void r(e)}u.done?t(c):Promise.resolve(c).then(n,o)}function R(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){E(i,n,o,a,u,"next",e)}function u(e){E(i,n,o,a,u,"throw",e)}a(void 0)}))}}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var M=function(){return"arjs-studio-".concat(Math.floor(899999*Math.random())+1e5)},N=function(e){function t(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.token,o=r.repo,i=void 0===o?null:o,a=r.branch,u=void 0===a?null:a,c=r.owner,s=void 0===c?null:c;if(O(this,t),e=S(this,j(t).call(this)),!n)throw new Error("Missing required token parameter");return e.owner=s,e.repo=i||M(),e.branch=u||"gh-pages",e.client=new w.Octokit({auth:n}),e}var r,n,o,i,a,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),r=t,(n=[{key:"setOwnerName",value:function(e){this.owner=e}},{key:"getOwner",value:function(){return this.client.users.getAuthenticated().then((function(e){return e.data}))}},{key:"addFile",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"utf-8";this.files.push({content:t,encoding:r,path:e,mode:"100644",type:"blob"})}},{key:"serveFiles",value:(u=R(regeneratorRuntime.mark((function e(t){var r,n,o,i,a,u,c,s,h,f,l,p,d=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.message,n=t.repo,o=void 0===n?null:n,i=t.branch,a=void 0===i?null:i,u=t.owner,c=void 0===u?null:u,0!==this.files.length){e.next=4;break}return console.warn("No files to publish"),e.abrupt("return",null);case 4:if(this.owner=c||this.owner,this.repo=o||this.repo||M(),this.branch=a||this.branch||"gh-pages",null!==this.owner){e.next=12;break}return e.next=10,this.getOwner();case 10:s=e.sent,this.owner=s.login;case 12:return e.next=14,this.getOrCreateRepo(this.repo);case 14:return e.next=16,this.getOrCreateBranch(this.branch);case 16:return h=e.sent,e.next=19,Promise.all(this.files.map((function(e){return d.createBlob(e.content,e.encoding).then((function(t){return{path:e.path,sha:t.sha,mode:e.mode,type:e.type}}))})));case 19:return f=e.sent,e.next=22,this.createTree(f);case 22:return l=e.sent,e.next=25,this.createCommit(r,l.sha,[h.commit.sha]);case 25:return p=e.sent,e.next=28,this.updateRef(p.sha,this.branch);case 28:if("gh-pages"===this.branch){e.next=31;break}return e.next=31,this.enablePages(this.branch);case 31:return e.next=33,this.rebuildPages();case 33:return e.next=35,this.getPagesUrl();case 35:return e.abrupt("return",e.sent);case 36:case"end":return e.stop()}}),e,this)}))),function(e){return u.apply(this,arguments)})},{key:"getOrCreateRepo",value:(a=R(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getRepo(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.warn("repo not found, creating"),e.next=11,this.createRepo(t);case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return a.apply(this,arguments)})},{key:"getOrCreateBranch",value:(i=R(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getBranch(t);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.warn("branch not found, creating"),e.next=11,this.getRef("master");case 11:return r=e.sent,e.next=14,this.createBranch(r.object.sha,t);case 14:return e.next=16,this.getBranch(t);case 16:return e.abrupt("return",e.sent);case 17:case"end":return e.stop()}}),e,this,[[0,6]])}))),function(e){return i.apply(this,arguments)})},{key:"createRepo",value:function(e){return this.client.repos.createForAuthenticatedUser({name:e,auto_init:!0}).then((function(e){return e.data}))}},{key:"setRepoName",value:function(e){this.repo=e}},{key:"getRepo",value:function(e){return this.client.repos.get({owner:this.owner,repo:e}).then((function(e){return e.data}))}},{key:"createBranch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gh-pages";return this.client.git.createRef({owner:this.owner,repo:this.repo,ref:"refs/heads/".concat(t),sha:e}).then((function(e){return e.data}))}},{key:"getBranch",value:function(e){return this.client.repos.getBranch({owner:this.owner,repo:this.repo,branch:e}).then((function(e){return e.data}))}},{key:"setBranchName",value:function(e){this.branch=e}},{key:"getRef",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"master";return this.client.git.getRef({owner:this.owner,repo:this.repo,ref:"heads/".concat(e)}).then((function(e){return e.data}))}},{key:"enablePages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.branch;return this.client.repos.enablePagesSite({owner:this.owner,repo:this.repo,source:{branch:e}})}},{key:"rebuildPages",value:function(){return this.client.repos.requestPageBuild({owner:this.owner,repo:this.repo}).then((function(e){return e.data}))}},{key:"getPagesUrl",value:function(){return this.client.repos.getPages({owner:this.owner,repo:this.repo}).then((function(e){return e.data.html_url}))}},{key:"commitFile",value:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.branch;return this.client.repos.createOrUpdateFile({owner:this.owner,repo:this.repo,path:t,message:r,content:e,branch:n}).then((function(e){return e.data}))}},{key:"createTree",value:function(e){return this.client.git.createTree({owner:this.owner,repo:this.repo,tree:e}).then((function(e){return e.data}))}},{key:"createBlob",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf-8";return this.client.git.createBlob({owner:this.owner,repo:this.repo,content:e,encoding:t}).then((function(e){return e.data}))}},{key:"createCommit",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.client.git.createCommit({owner:this.owner,repo:this.repo,message:e,tree:t,parents:r}).then((function(e){return e.data}))}},{key:"updateRef",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.branch;return this.client.git.updateRef({owner:this.owner,repo:this.repo,ref:"heads/".concat(t),sha:e,force:!0}).then((function(e){return e.data}))}}])&&P(r.prototype,n),o&&P(r,o),t}(function(){function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];x(this,e),this.files=[]}var t,r,n,o,i;return t=e,(r=[{key:"addFile",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.files.push({path:e,content:t,encoding:r})}},{key:"clearFiles",value:function(){this.files=[]}},{key:"serveFiles",value:(o=regeneratorRuntime.mark((function e(){var t=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.length>0&&void 0!==t[0]&&t[0],console.log(JSON.stringify(this.files));case 2:case"end":return e.stop()}}),e,this)})),i=function(){var e=this,t=arguments;return new Promise((function(r,n){var i=o.apply(e,t);function a(e){b(i,r,n,a,u,"next",e)}function u(e){b(i,r,n,a,u,"throw",e)}a(void 0)}))},function(){return i.apply(this,arguments)})}])&&k(t.prototype,r),n&&k(t,n),e}());r.d(t,"LocationModule",(function(){return n})),r.d(t,"MarkerModule",(function(){return y})),r.d(t,"NFTModule",(function(){return m})),r.d(t,"GithubProvider",(function(){return N})),r.d(t,"ENC_BASE64",(function(){return"base64"}))}])}));
//# sourceMappingURL=arjs-studio-backend.min.js.map